<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Damien Couroussé - generating page contents from org-mode files</title>
		<meta name="description" content="damien dot courousse dot fr">
		<meta name="author" content="Damien Couroussé">


		<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
		<link rel="stylesheet" href="../assets/css/side-menu.css">
		<link rel="stylesheet" href="../assets/css/main.css">
		<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
	</head>

	<body>
		<div id="layout">
			<!-- Menu toggle -->
			<a href="#menu" id="menuLink" class="menu-link">
				<!-- Hamburger icon -->
				<span></span>
			</a>
			<div id="menu">
				<div class="pure-menu pure-menu-open">
					<a class="pure-menu-heading" href="../index.html">Home</a>

					<ul class="pure-menu-list">
						<li class="pure-menu-item">
							<a href="../publications.html" class="pure-menu-link">Publications</a>
						</li>
						<li class="pure-menu-item">
							<a href="../posts.html" class="pure-menu-link">Posts</a>
						</li>
						<li class="pure-menu-item">
							<a href="../sw.html" class="pure-menu-link">Software</a>
						</li>
					</ul>
				</div>
			</div> <!-- /menu -->

			<div id="main">
				<div class="header">
					<h1>generating page contents from org-mode files</h1>
				</div>

				<div class="content">
					<div class="pure-g">
						<div class="pure-u-1 pure-u-lg-1-5"></div>
						<div class="pure-u-1 pure-u-lg-3-5">
							<div class="content">
    Posted on November 19, 2014
    
</div>

<p>The markdown format is nice, but considering that I extensively use <a href="http://orgmode.org">OrgMode</a>, I investigated a bit to use org-mode files for generating the contents of this website. Indeed, org-mode files are supported by pandoc since version 1.12, which has been integrated in <a href="http://jaspervdj.be/hakyll/releases.html">hakyll 4.5.2</a>.</p>
<h1>Generation of pages from org-mode files</h1>
<p>This is straightforward. Here is an example of a simple build rule for Hakyll:</p>
<pre class="sourceCode Haskell"><code class="sourceCode haskell">    <span class="co">-- Static pages</span>
    match <span class="st">&quot;pages/*.org&quot;</span> <span class="fu">$</span> <span class="kw">do</span>
        route <span class="fu">$</span> gsubRoute <span class="st">&quot;pages/&quot;</span> (const <span class="st">&quot;&quot;</span>) <span class="ot">`composeRoutes`</span> setExtension <span class="st">&quot;html&quot;</span>
        compile <span class="fu">$</span> <span class="kw">do</span>
            pandocCompiler
                <span class="fu">&gt;&gt;=</span> loadAndApplyTemplate <span class="st">&quot;templates/default.html&quot;</span> defaultContext
                <span class="fu">&gt;&gt;=</span> relativizeUrls</code></pre>
<h1>Metadata</h1>
<p>Metadata are defined in an org-mode file with a dedicated format :</p>
<pre class="example"><code>#FILE: mypage.org
#+TITLE: A page title
</code></pre>
<p>However, org-mode metadata are not recognised by Hakyll, especially if you want to exploit metadata in your build system. To do so, you need to <a href="http://jaspervdj.be/hakyll/tutorials/02-basics.html#pages-and-metadata">create a metadata file</a> that will describe your metadata with the syntax used by Hakyll, or to add a metadata header in the org-mode file:</p>
<pre class="example"><code>#FILE: mypage.org.metadata
---
title: A page title
---
</code></pre>
<p>When such a metadata header is used, its contents override the org-mode metadata values.</p>

						</div>
						<div class="pure-u-1 pure-u-lg-1-5"></div>
					</div> <!-- pure-g -->
				</div> <!-- /content -->
			</div> <!-- /main -->

			<footer id="footer">
				<div class="footer">
					<p style="text-align:center; font-size:75%"> File last modified Wed, 25 Feb 2015 15:55:42 +0100 (f21d8d0) </p>
					<p style="text-align:center; font-size:75%">
					Site generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
					and <a href="http://johnmacfarlane.net/pandoc">pandoc</a>
					</p>
				</div>
			</footer>


		</div> <!-- /layout -->

		<script src="../assets/js/ui.js"></script>

	</body>
</html>
